<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<KPIBags>
	<KPIBag ID="Label1" BagType="Label" Text="设备及资产分布" Tag=""/>
	
	<KPIBag ID="AnalysisChart1" BagType="Chart" SourceType="SQLStr" QueryString="SELECT (SELECT BaseEquipmentName FROM tbl_equipmentbasetype B,tbl_equipmenttemplate C WHERE B.BaseEquipmentId = C.EquipmentBaseType AND C.EquipmentTemplateId = A.EquipmentTemplateId LIMIT 1 ),COUNT(B.ItemValue) from tbl_equipment A,tbl_dataitem B where A.EquipmentCategory = B.ItemId and B.EntryId=7 GROUP BY B.ItemValue;" Text="设备分布(按设备种类)"  Tag="ChartType=Bar&amp;YTitle=设备名(个数)&amp;XTitle=设备种类&amp;HorizontalAxisType=y&amp;IsXLean=false"/>
	
	<KPIBag ID="AnalysisChart3" BagType="Chart" SourceType="SQLStr" QueryString="SELECT (SELECT BaseEquipmentName FROM tbl_equipmentbasetype B,tbl_equipmenttemplate C WHERE B.BaseEquipmentId = C.EquipmentBaseType AND C.EquipmentTemplateId = A.EquipmentTemplateId LIMIT 1 ) AS 'Type',COUNT(*) AS 'Count' FROM tbl_equipment A WHERE EquipmentCategory NOT IN (51,52,53,54,55,99) GROUP BY A.EquipmentTemplateId UNION (SELECT (SELECT BaseEquipmentName FROM tbl_equipmentbasetype B,tbl_equipmenttemplate C WHERE B.BaseEquipmentId = C.EquipmentBaseType AND C.EquipmentTemplateId = A.EquipmentTemplateId LIMIT 1 ) AS 'Type',COUNT(*) AS 'Count' FROM tbl_equipment A,TBL_EquipmentTemplate B,TBL_Signal C WHERE A.EquipmentTemplateId = B.EquipmentTemplateId AND B.EquipmentTemplateId = C.EquipmentTemplateId and C.BaseTypeId like '1004%'AND C.BaseTypeId NOT IN ('1004999001','1004009001') GROUP BY A.EquipmentTemplateId);" Text="资产分类统计"  Tag="ChartType=Bar&amp;YTitle=资产名(个数)&amp;XTitle=资产类别&amp;IsXLean=false"/>
	
	<KPIBag ID="AnalysisModel1" BagType="Chart" SourceType="SQLStr" QueryString="SELECT A.EquipmentName,(SELECT BaseEquipmentName FROM tbl_equipmentbasetype B,tbl_equipmenttemplate C WHERE B.BaseEquipmentId = C.EquipmentBaseType AND C.EquipmentTemplateId = A.EquipmentTemplateId LIMIT 1 ) AS 'Type' FROM tbl_equipment A WHERE EquipmentCategory NOT IN (51,52,53,54,55,99) UNION ( SELECT concat(A.EquipmentName,'-',C.SignalName),(SELECT BaseEquipmentName FROM tbl_equipmentbasetype B,tbl_equipmenttemplate C WHERE B.BaseEquipmentId = C.EquipmentBaseType AND C.EquipmentTemplateId = A.EquipmentTemplateId LIMIT 1 ) AS 'Type' FROM TBL_Equipment A,TBL_EquipmentTemplate B,TBL_Signal C,TBL_SignalBaseDic E WHERE A.EquipmentTemplateId = B.EquipmentTemplateId AND B.EquipmentTemplateId = C.EquipmentTemplateId and C.BaseTypeId like '1004%'AND C.BaseTypeId NOT IN ('1004999001','1004009001')  GROUP BY C.BaseTypeId);" Text="资产清单"  Tag="ChartType=Table&amp;Th1=资产名&amp;Th2=资产类别"/>
</KPIBags>